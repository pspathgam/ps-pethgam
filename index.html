p<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Government Primary School Pethgam Wagoora - Dynamic CMS with Staff & Results</title>
    <style>
        /* BASE STYLES */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; margin: 0; padding: 0; background-color: #f7f7f7; color: #333; }
        h1, h2, h3, h4 { color: #0056b3; }
        a { text-decoration: none; color: #0056b3; }
        a:hover { color: #003d82; }
        .content-section { padding: 20px; }
        .full-width { width: 100%; box-sizing: border-box; }

        /* HEADER AND CONTACT INFO */
        header { background-color: #fff; padding: 15px 30px; border-bottom: 2px solid #0056b3; }
        .contact-info { font-size: 1.3em; margin-bottom: 5px; color: #555; }
        .logo-section { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; }
        .logo-section h1 { margin: 0; font-size: 1.5em; flex-grow: 1; }

        /* NAVIGATION - 3D BUTTON EFFECT */
        .nav { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;}
        .nav .btn {
            padding: 10px 15px;
            background-color: #0056b3; 
            color: white;
            border-radius: 5px;
            font-weight: bold;
            transition: all 0.1s ease;
            box-shadow: 0 4px 0 0 #003d82; 
            transform: translateY(0);
        }
        .nav .btn:active {
            transform: translateY(4px); 
            box-shadow: 0 0 0 0 #003d82; 
        }
        .nav .btn:hover { background-color: #007bff; }
        .nav .btn.admin { background-color: #dc3545; box-shadow: 0 4px 0 0 #a0202d; }
        .nav .btn.admin:active { transform: translateY(4px); box-shadow: 0 0 0 0 #a0202d; }
        .nav a.btn { display: block; text-align: center; }

        /* HERO SLIDER (simple) */
        .hero { position: relative; height: 400px; overflow: hidden; margin-bottom: 20px; }
        .slides { display: flex; transition: transform 0.5s ease-in-out; width: 300%; }
        .slide { width: 33.333%; height: 400px; background-size: cover; background-position: center; flex-shrink: 0; position: relative; }
        .slide .content { background-color: rgba(0, 0, 0, 0.5); color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 20px; height: 100%; box-sizing: border-box; }
        .slide h2 { color: #ffc107; }
        .cta-row .cta { background-color: #28a745; color: white; padding: 10px 20px; border-radius: 5px; margin: 0 10px; transition: background-color 0.3s; }
        .cta-row .cta:hover { background-color: #218838; }

        /* TICKER */
        .ticker { background-color: #fff3cd; border: 1px solid #ffeeba; padding: 8px 20px; margin-bottom: 20px; display: flex; align-items: center; color: #856404; }
        .ticker .label { font-weight: bold; margin-right: 15px; background-color: #ffc107; padding: 3px 8px; border-radius: 3px; }
        .marquee { overflow: hidden; white-space: nowrap; flex-grow: 1; }
        .marquee p { display: inline-block; padding-left: 100%; animation: marquee 20s linear infinite; margin: 0; }
        @keyframes marquee { 0% { transform: translate(0, 0); } 100% { transform: translate(-100%, 0); } }

        /* QUICK LINKS CARDS */
        .quick-links { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; padding: 20px; }
        .quick-links .card { text-align: center; padding: 20px; border-radius: 8px; box-shadow: 0 6px 12px rgba(0,0,0,0.2); transition: transform 0.2s; }
        .quick-links .card:hover { transform: translateY(-5px); box-shadow: 0 8px 16px rgba(0,0,0,0.25); }
        .quick-links .card .icon { font-size: 2em; margin-bottom: 10px; width: 50px; height: 50px; line-height: 50px; border-radius: 50%; display: inline-block; color: white; }
        .quick-links .card:nth-child(1) { background-color: #007bff; } .quick-links .card:nth-child(1) .icon { background-color: #0056b3; }
        .quick-links .card:nth-child(1) h3, .quick-links .card:nth-child(1) p { color: white; } .quick-links .card:nth-child(1) a { color: #ffc107; font-weight: bold; }
        .quick-links .card:nth-child(2) { background-color: #28a745; } .quick-links .card:nth-child(2) .icon { background-color: #1e7e34; }
        .quick-links .card:nth-child(2) h3, .quick-links .card:nth-child(2) p { color: white; } .quick-links .card:nth-child(2) a { color: #ffc107; font-weight: bold; }
        .quick-links .card:nth-child(3) { background-color: #ffc107; } .quick-links .card:nth-child(3) .icon { background-color: #e0a800; }
        .quick-links .card:nth-child(3) h3, .quick-links .card:nth-child(3) p { color: #333; } .quick-links .card:nth-child(3) a { color: #0056b3; font-weight: bold; }
        .quick-links .card:nth-child(4) { background-color: #17a2b8; } .quick-links .card:nth-child(4) .icon { background-color: #138496; }
        .quick-links .card:nth-child(4) h3, .quick-links .card:nth-child(4) p { color: white; } .quick-links .card:nth-child(4) a { color: #ffc107; font-weight: bold; }

        /* NEWS & EVENTS - VERTICAL SCROLLING */
        .news-container { height: 180px; overflow: hidden; padding: 0 20px; }
        .news-scroller { animation: news-scroll 15s linear infinite; }
        .news-item { border: 1px solid #ddd; padding: 15px; border-radius: 8px; background-color: white; margin-bottom: 10px; width: 95%; }
        .news-item h4 { color: #0056b3; margin-top: 0; }
        .news-scroller::after { content: ''; display: block; height: 100%; } 
        @keyframes news-scroll {
            0% { transform: translateY(0); }
            100% { transform: translateY(-33.333%); }
        }

        /* HEROES/STAFF/STUDENT PHOTO DISPLAY (UPDATED) */
        .scrolling-section { overflow-x: auto; white-space: nowrap; padding: 10px 20px 20px 20px; scroll-snap-type: x mandatory; }
        .scrolling-section::-webkit-scrollbar { height: 8px; }
        .scrolling-section::-webkit-scrollbar-thumb { background: #0056b3; border-radius: 10px; }
        
        .heroes-grid { display: flex; gap: 20px; }
        .hero-card, .staff-card, .student-card { 
            width: 180px; 
            padding: 15px; 
            border: 1px solid #ffc107; 
            border-radius: 8px; 
            background-color: #fffaf0; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); 
            flex-shrink: 0; 
            display: inline-block; 
            scroll-snap-align: center; 
            text-align: center; 
            margin-bottom: 15px; /* Added margin for cards */
        }
        
        /* CIRCULAR PHOTO CONTAINER STYLES */
        .photo-container { 
            width: 100px; 
            height: 100px; 
            border-radius: 50%; 
            margin: 0 auto 10px; 
            overflow: hidden; 
            line-height: 100px; 
            font-weight: bold; 
            color: #555;
            background-color: #e6f7ff; /* Light blue background for placeholders */
            border: 3px solid #0056b3;
        }
        .photo-container img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
            display: block; 
        }
        
        /* STAFF SECTION */
        .staff-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; padding: 20px; }
        .staff-card { border: 1px solid #0056b3; background-color: #e9ecef; }
        .staff-card h4 { margin: 5px 0 2px; }
        
        /* STUDENT SECTION */
        .class-section { border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; border-radius: 8px; background-color: white; }
        .student-list { display: flex; overflow-x: auto; gap: 15px; padding: 10px 0; }
        .student-card { border: 1px solid #ddd; padding: 10px; }

        /* ADMIN PANEL STYLES */
        #adminModal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); }
        .admin-content { background-color: #fefefe; margin: 5% auto; padding: 20px; border: 1px solid #888; width: 90%; max-width: 800px; border-radius: 10px; }
        .close-btn { color: #aaa; float: right; font-size: 28px; font-weight: bold; }
        .close-btn:hover, .close-btn:focus { color: #000; text-decoration: none; cursor: pointer; }
        
        .admin-nav button { background-color: #0056b3; color: white; border: none; padding: 10px 15px; margin-right: 5px; cursor: pointer; border-radius: 5px; }
        .admin-nav button.active { background-color: #28a745; }
        .admin-section { display: none; margin-top: 20px; padding: 15px; border: 1px solid #ddd; }
        .admin-section h4 { border-bottom: 2px solid #ffc107; padding-bottom: 5px; }
        .admin-section input, .admin-section select { width: calc(100% - 22px); padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; }
        .admin-section button.add { background-color: #28a745; color: white; padding: 10px; border: none; border-radius: 5px; cursor: pointer; }
        .admin-section button.remove { background-color: #dc3545; color: white; border: none; padding: 5px 10px; margin-left: 10px; cursor: pointer; border-radius: 4px; }
        .list-item { background: #eee; padding: 10px; margin-bottom: 5px; border-radius: 4px; display: flex; justify-content: space-between; align-items: center;}

        /* PHOTO INPUT GROUP */
        .photo-input-group {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        .photo-preview {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            flex-shrink: 0;
        }
        .photo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .mark-input-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        .mark-input-grid div { padding: 5px 0; }
        
        /* MARKSHEET STYLES (Print Only) */
        .marksheet-modal { display: none; position: fixed; z-index: 1001; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: white; }
        .marksheet-content { width: 800px; margin: 20px auto; padding: 30px; border: 1px solid #333; }
        @media print {
            body * { visibility: hidden; }
            .marksheet-modal, .marksheet-modal * { visibility: visible; }
            .marksheet-modal { position: absolute; left: 0; top: 0; width: 100%; height: auto; }
            .marksheet-content { border: none; width: 95%; margin: 0; padding: 0; }
            #printButton, .close-btn { display: none; }
        }

        /* MarKsheet specific formatting */
        .marksheet-content table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 0.9em; }
        .marksheet-content th, .marksheet-content td { border: 1px solid #333; padding: 8px; text-align: center; }
        .marksheet-content .header-info td { text-align: left; border: none; padding: 2px 0; }
        .marksheet-content .final-summary td { border: none; padding: 5px; }
        .marksheet-content h3 { text-align: center; margin: 0; }
        .marksheet-content h4 { text-align: center; margin: 5px 0 20px; }
        .marksheet-content .signature-row { display: flex; justify-content: space-between; margin-top: 50px; font-weight: bold; }

        /* MEDIA QUERIES */
        @media (max-width: 768px) {
            .two-col { flex-direction: column; }
            .footer-cols { flex-direction: column; gap: 20px; }
            .admin-content { width: 95%; margin: 10px auto; }
            .mark-input-grid { grid-template-columns: repeat(2, 1fr); }
            .marksheet-content { width: 95%; margin: 10px auto; padding: 10px; }
        }
    </style>
</head>
<body>
    <header>
        <div class="contact-info">
            Phone: **7006261694** | **9596449881** | Email: **pspethgam@gmail.com** | UDISE: **01022202207**
        </div>
        <div class="logo-section">
            <img src="assets/images/logo.png" alt="School Logo" onerror="this.style.display='none'">
            <h1>Government Primary School Pethgam Wagoora</h1>
            <h2>Wagoora Babareshi Road Near ZEO Office Wagoora</h2>
        </div>
        
        <nav class="nav" aria-label="Main navigation">
            <a class="btn" href="index.html">Home</a>
            <a class="btn" href="about.html">About</a>
            <a class="btn" href="admissions.html">Admissions</a>
            <a class="btn" href="academics.html">Academics</a>
            <a class="btn" href="students.html">Students</a>
            <a class="btn" href="teachers.html">Teachers</a>
            <a class="btn" href="gallery.html">Gallery</a>
            <a class="btn" href="contact.html">Contact</a>
            <button class="btn admin" onclick="openAdminModal()">Admin Panel</button>
        </nav>
    </header>

    <section class="hero" aria-label="Hero banner">
        <div class="slides" id="heroSlides">
            <div class="slide" style="background-image:url('assets/images/hero1.jpg'); background-color: #0056b3;">
                <div class="content"><h2>Welcome to Government Primary School Pethgam Wagoora</h2><p>Creating a safe, inclusive and learning-focused environment for our children.</p><div class="cta-row"><a class="cta" href="admissions.html">Apply Online</a><a class="cta" href="students.html">Check Results</a></div></div>
            </div>
            <div class="slide" style="background-image:url('assets/images/hero2.jpg'); background-color: #28a745;">
                <div class="content"><h2>Holistic education that builds character</h2><p>Activities, learning material and support for every student.</p><div class="cta-row"><a class="cta" href="academics.html">Syllabus & Time Table</a></div></div>
            </div>
            <div class="slide" style="background-image:url('assets/images/hero3.jpg'); background-color: #ffc107;">
                <div class="content"><h2>Community driven progress</h2><p>Parents, teachers, and local community working together.</p><div class="cta-row"><a class="cta" href="contact.html">Contact Us</a></div></div>
            </div>
        </div>
    </section>

    <div class="ticker" role="region" aria-label="Latest announcements">
        <div class="label">Announcements</div>
        <div class="marquee">
            <p id="tickerContent"> Admissions open for Pre Primary 3 to Grade 5 ‚Äî Apply online | School reopens on 1st November 2025 | Parent-teacher meeting on 10 December 2025 | Winter vacation starts from 1st December 2025. </p>
        </div>
    </div>

    <section class="quick-links content-section">
        <div class="card"><div class="icon">A</div><h3>Admissions 2025‚Äì26</h3><p>Online forms & guidance.</p><a href="admissions.html">Open</a></div>
        <div class="card"><div class="icon">B</div><h3>Biometric Attendance</h3><p>Teacher & Student attendance portal (Android).</p><a href="students.html">Open</a></div>
        <div class="card"><div class="icon">S</div><h3>Syllabus & Time Table</h3><p>Download class-wise syllabus.</p><a href="academics.html">Open</a></div>
        <div class="card"><div class="icon">R</div><h3>Results</h3><p>Academic results & mark sheets.</p><a href="students.html">Open</a></div>
    </section>

    <section class="content-section">
        <h3>News & Events</h3>
        <div class="news-container">
            <div class="news-scroller" id="newsScroller">
                </div>
        </div>
    </section>

    <section class="heroes">
        <h3 style="color: #28a745;">üèÜ Our Heroes (Student Achievements)</h3>
        <div class="scrolling-section">
            <div class="heroes-grid" id="heroesGrid">
                </div>
        </div>
    </section>

    <section class="content-section">
        <h3>üßë‚Äçüè´ Our Teaching & Non-Teaching Staff</h3>
        <div class="staff-grid" id="staffGrid">
            </div>
    </section>
    
    <section class="content-section">
        <h3>üë®‚Äçüéì Our Students</h3>
        <div id="studentClassesContainer">
            </div>
    </section>

    <section class="content-section" style="margin-top:20px;">
        <div class="two-col">
            <div class="principal">
                <h3>Principal's Message</h3>
                <p>Welcome to Government Primary School Pethgam Wagoora. Our focus is on fostering curiosity, kindness and excellence in every child. We are committed to providing quality education supported by dedicated teachers and essential resources. Parents and community are key partners in this journey.</p>
                <p><strong>- Mohammad Ashraf Rather (HOI)</strong></p>
            </div> 
            <div class="stats">
                <h3>School At A Glance</h3>
                <div class="stat-grid">
                    <div class="stat-item"><div class="number">50+</div><div class="label">Students Enrolled</div></div>
                    <div class="stat-item"><div class="number">3</div><div class="label">Teachers</div></div>
                    <div class="stat-item"><div class="number">1</div><div class="label">Aaya</div></div>
                    <div class="stat-item"><div class="number">1</div><div class="label">Cook</div></div>
                    <div class="stat-item"><div class="number">3</div><div class="label">Classrooms</div></div>
                    <div class="stat-item"><div class="number">350+</div><div class="label">Library Books</div></div>
                </div>
            </div>
        </div>
    </section>

    <section class="content-section" style="margin-top:14px;">
        <h3>Photo Gallery Preview</h3>
        <div class="scrolling-section">
            <div class="gallery-grid">
                <img src="assets/images/gallery1.jpg" alt="Children in classroom" onerror="this.src='https://via.placeholder.com/320x180/0056b3/ffffff?text=Classroom'">
                <img src="assets/images/gallery2.jpg" alt="School building exterior" onerror="this.src='https://via.placeholder.com/320x180/28a745/ffffff?text=School+Building'">
                <img src="assets/images/gallery3.jpg" alt="Students playing games" onerror="this.src='https://via.placeholder.com/320x180/ffc107/333333?text=Sports+Day'">
                <img src="assets/images/gallery4.jpg" alt="Teacher interacting with students" onerror="this.src='https://via.placeholder.com/320x180/17a2b8/ffffff?text=Learning+Activity'">
                <img src="https://via.placeholder.com/320x180/dc3545/ffffff?text=Culture+Event" alt="Culture Event">
                <img src="https://via.placeholder.com/320x180/6c757d/ffffff?text=Field+Trip" alt="Field Trip">
            </div>
        </div>
        <p style="margin-top:8px; text-align: center;"><a href="gallery.html" style="font-weight: bold;">View full gallery ‚Üí</a></p>
    </section> 

    <footer>
        <div class="footer-cols">
            <div>
                <h4>Contact Details</h4>
                <p>Government Primary School Pethgam Wagoora<br>
                Address: Pethgam Wagoora, Baramulla, J&K Wagoora Babareshi Road Near ZEO Office Wagoora 193109</p>
                <p>Phone: 7006261694 | 9596449881<br>
                Email: pspethgam@gmail.com</p>
            </div>
            <div>
                <h4>Quick Links</h4>
                <a href="admissions.html">Admissions</a>
                <a href="academics.html">Academics</a>
                <a href="contact.html">Contact</a>
                <button onclick="openAdminModal()" style="background: none; border: none; color: white; padding: 0; cursor: pointer; display: block; text-align: left; margin-bottom: 5px;">Admin Login</button>
            </div>
            <div>
                <h4>Follow Us</h4>
                <a href="#" style="margin-bottom: 5px;">Facebook</a>
                <a href="#" style="margin-bottom: 5px;">X (Twitter)</a>
                <a href="#" style="margin-bottom: 5px;">Instagram</a>
            </div>
        </div>
        <div class="copyright">
            ¬© 2025 Government Primary School Pethgam Wagoora. All rights reserved.
        </div>
    </footer>

    <div id="adminModal" class="modal">
        <div class="admin-content">
            <span class="close-btn" onclick="closeAdminModal()">&times;</span>
            <h2>Admin Panel Login</h2>
            <div id="loginForm">
                <p>Username: <input type="text" id="adminUser" value="admin" class="full-width"></p>
                <p>Password: <input type="password" id="adminPass" value="12345" class="full-width"></p>
                <button onclick="attemptLogin()" class="btn admin">Login</button>
                <p style="color: red;" id="loginError"></p>
            </div>
            
            <div id="adminDashboard" style="display:none;">
                <h3>Dashboard</h3>
                <div class="admin-nav">
                    <button id="navBtnNews" onclick="showAdminSection('news')">News & Ticker</button>
                    <button id="navBtnHeroes" onclick="showAdminSection('heroes')">Heroes</button>
                    <button id="navBtnStaff" onclick="showAdminSection('staff')">Staff</button>
                    <button id="navBtnStudents" onclick="showAdminSection('students')">Students</button>
                    <button id="navBtnResults" onclick="showAdminSection('results')">Results</button>
                    <button onclick="logout()">Logout</button>
                </div>

                <div id="admin-news" class="admin-section">
                    <h4>Manage News Items</h4>
                    <input type="text" id="newsInput" placeholder="Enter new news item text">
                    <button onclick="addNews()" class="add">Add News</button>
                    <div id="newsList" style="margin-top: 15px;"></div>
                    
                    <h4 style="margin-top: 25px;">Manage Ticker Text</h4>
                    <input type="text" id="tickerInput" placeholder="Enter full scrolling ticker text" class="full-width">
                    <button onclick="updateTickerText()" class="add">Update Ticker</button>
                </div>

                <div id="admin-heroes" class="admin-section">
                    <h4>Add New Hero</h4>
                    <input type="text" id="heroNameInput" placeholder="Hero Name (e.g., Zoya Sheikh)">
                    <select id="heroClassInput" class="full-width">
                        <option value="Class Pre-Primary 3">Class Pre-Primary 3</option><option value="Class Pre-Primary 2">Class Pre-Primary </option>
                        <option value="Class Balvatika">Class Balvatika</option><option value="Class 1">Class 1</option>
                        <option value="Class 2">Class 2</option><option value="Class 3">Class 3</option>
                        <option value="Class 4">Class 4</option><option value="Class 5">Class 5</option>
                    </select>
                    <input type="text" id="heroAchievementInput" placeholder="Achievement (e.g., Math Olympiad Winner)">
                    
                    <div class="photo-input-group">
                        <label for="heroPhotoUpload">Upload Photo:</label>
                        <input type="file" id="heroPhotoUpload" accept="image/*" onchange="previewPhoto('heroPhotoUpload', 'heroPreview')">
                        <div id="heroPreview" class="photo-preview"></div>
                    </div>

                    <button onclick="addHero()" class="add">Add Hero</button>
                    <h4 style="margin-top: 25px;">Current Heroes</h4>
                    <div id="heroesList"></div>
                </div>

                <div id="admin-staff" class="admin-section">
                    <h4>Add New Staff Member</h4>
                    <input type="text" id="staffNameInput" placeholder="Staff Name">
                    <select id="staffDesignationInput" class="full-width">
                        <option value="Teacher">Teacher</option>
                        <option value="Head of Institution (HOI)">Head of Institution (HOI)</option>
                        <option value="COOK">COOK</option>
                        <option value="AAYA">AAYA</option>
                    </select>
                    
                    <div class="photo-input-group">
                        <label for="staffPhotoUpload">Upload Photo:</label>
                        <input type="file" id="staffPhotoUpload" accept="image/*" onchange="previewPhoto('staffPhotoUpload', 'staffPreview')">
                        <div id="staffPreview" class="photo-preview"></div>
                    </div>

                    <button onclick="addStaff()" class="add">Add Staff</button>
                    <h4 style="margin-top: 25px;">Current Staff</h4>
                    <div id="staffList"></div>
                </div>

                <div id="admin-students" class="admin-section">
                    <h4>Add New Student</h4>
                    <input type="text" id="studentNameInput" placeholder="Student Name (e.g., Mohammad Aazam Rather)">
                    <input type="text" id="father'sNameInput" placeholder="Father's Name (e.g., Mohammad Ashraf Rather)">
                    <input type="text" id="mother'sNameInput" placeholder="Mother's Name (e.g., Yasmeena Bano)">
                    <input type="text" id="dateOfBirthInput" placeholder="Date of Birth(DD MM YYYY)">
                    <input type="text" id="studentPENNoInput" placeholder="Student Name (123434565678)">
                    <input type="text" id="ApaarIDInput" placeholder="Student Name (123434565678)">
                    <input type="text" id="studentIdInput" placeholder="Student ID (Unique)">
                    <select id="studentClassInput" class="full-width">
                        <option value="Class Pre-Primary 3">Class Pre-Primary 3</option><option value="Class Pre-Primary 2">Class Pre-Primary 2</option>
                        <option value="Class Balvatika">Class Balvatika</option><option value="Class 1">Class 1</option>
                        <option value="Class 2">Class 2</option><option value="Class 3">Class 3</option>
                        <option value="Class 4">Class 4</option><option value="Class 5">Class 5</option>
                    </select>
                    
                    <div class="photo-input-group">
                        <label for="studentPhotoUpload">Upload Photo:</label>
                        <input type="file" id="studentPhotoUpload" accept="image/*" onchange="previewPhoto('studentPhotoUpload', 'studentPreview')">
                        <div id="studentPreview" class="photo-preview"></div>
                    </div>

                    <button onclick="addStudent()" class="add">Add Student</button>
                    <h4 style="margin-top: 25px;">Current Students</h4>
                    <div id="studentsList"></div>
                </div>

                <div id="admin-results" class="admin-section">
                    <h4>Submit Student Marks</h4>
                    <input type="text" id="resultStudentId" placeholder="Student ID (e.g., 001)">
                    <select id="resultSubject" class="full-width">
                        <option value="">-- Select Subject --</option>
                        <option value="English">English</option>
                        <option value="Mathematics">Mathematics</option>
                        <option value="EVS">EVS</option>
                        <option value="Urdu">Urdu</option>
                        <option value="Kashmiri">Kashmiri</option>
                    </select>
                    
                    <h5 style="margin-top: 15px;">Marks Submission:</h5>
                    <p style="font-size: 0.9em; margin-bottom: 10px;">FA Marks (Max 5 each), CCA (Max 20), SA (Max 50)</p>
                    <div class="mark-input-grid">
                        <div>FA1 (5): <input type="number" id="fa1" min="0" max="5"></div>
                        <div>FA2 (5): <input type="number" id="fa2" min="0" max="5"></div>
                        <div>FA3 (5): <input type="number" id="fa3" min="0" max="5"></div>
                        <div>FA4 (5): <input type="number" id="fa4" min="0" max="5"></div>
                        <div>FA5 (5): <input type="number" id="fa5" min="0" max="5"></div>
                        <div>FA6 (5): <input type="number" id="fa6" min="0" max="5"></div>
                        <div>CCA (20): <input type="number" id="cca" min="0" max="20"></div>
                        <div>SA (50): <input type="number" id="sa" min="0" max="50"></div>
                    </div>
                    
                    <button onclick="submitMarks()" class="add" style="margin-top: 15px;">Submit Marks</button>

                    <h4 style="margin-top: 25px;">View Results & Marksheets</h4>
                    <div id="resultsList"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="marksheetModal" class="marksheet-modal">
        <div id="marksheetContent" class="marksheet-content">
            <button id="printButton" onclick="window.print()" style="position: absolute; right: 40px; top: 30px; padding: 10px; background-color: #0056b3; color: white; border: none; cursor: pointer;">Print Marksheet</button>
            <span class="close-btn" style="position: absolute; right: 10px; top: 10px;" onclick="document.getElementById('marksheetModal').style.display='none'">&times;</span>
        </div>
    </div>

    <script>
      // ==========================================================
        // DYNAMIC CONTENT DATA STORE (LOCALSTORAGE)
        // ==========================================================
        const CLASSES = ["Class Pre Primary 3", "Class Pre Primary 2", "Class Balvatika", "Class 1", "Class 2", "Class 3", "Class 4", "Class 5"];
        const SUBJECTS = ["English", "Mathematics", "EVS", "Urdu", "Kashmiri"];
        const PROFICIENCY_LEVELS = {
            'A+': 'Sky',
            'A': 'Mountain',
            'B': 'Mountain',
            'C': 'Stream',
            'D': 'Stream',
            'E': 'Refuge'
        };

        const DEFAULT_NEWS = ["Admissions for 2026 session begin next week.", "Parent-Teacher meeting scheduled for 10 December 2025."];
        const DEFAULT_HEROES = [{ name: "Aamir Khan", class: "Class 5", achievement: "Top Scorer", photo: '' }];
        const DEFAULT_STUDENTS = [{ id: "406", name: "MAHIRA SALAM", class: "Class 4", photo: '', father: "ABDUL SALAM BHAT", mother: "GULSHANA BEGUM", dob: "15-05-2017", rollNo: 406 }];
        const DEFAULT_STAFF = [{ name: "Mohammad Ashraf Rather", designation: "Head of Institution (HOI)", photo: '' }];
        const DEFAULT_RESULTS = []; 
        
        function initData() {
            if (!localStorage.getItem('news')) localStorage.setItem('news', JSON.stringify(DEFAULT_NEWS));
            if (!localStorage.getItem('heroes')) localStorage.setItem('heroes', JSON.stringify(DEFAULT_HEROES));
            if (!localStorage.getItem('students')) localStorage.setItem('students', JSON.stringify(DEFAULT_STUDENTS));
            if (!localStorage.getItem('staff')) localStorage.setItem('staff', JSON.stringify(DEFAULT_STAFF));
            if (!localStorage.getItem('results')) localStorage.setItem('results', JSON.stringify(DEFAULT_RESULTS));
            if (!localStorage.getItem('ticker')) localStorage.setItem('ticker', document.getElementById('tickerContent').innerText);
        }

        // ==========================================================
        // IMAGE HANDLING FUNCTIONS (CIRCULAR DISPLAY)
        // ==========================================================
        let currentPhotoBase64 = { hero: '', student: '', staff: '' };

        function previewPhoto(fileInputId, previewId) {
            const file = document.getElementById(fileInputId).files[0];
            const preview = document.getElementById(previewId);
            const type = fileInputId.replace('PhotoUpload', '').toLowerCase();

            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const base64String = e.target.result;
                    currentPhotoBase64[type] = base64String;
                    preview.innerHTML = `<img src="${base64String}" alt="Preview">`;
                };
                reader.readAsDataURL(file);
            } else {
                preview.innerHTML = '';
                currentPhotoBase64[type] = '';
            }
        }

        function getPhotoHtml(base64, type) {
            // Updated to use the generic .photo-container for circular display
            if (base64) {
                return `<div class="photo-container"><img src="${base64}" alt="${type} Photo"></div>`;
            }
            // Return default placeholder text inside the container
            const text = type.charAt(0).toUpperCase();
            return `<div class="photo-container" style="background-color: #d1ecf1; color: #0056b3; line-height: 100px;">${text}</div>`;
        }

        // ==========================================================
        // FRONT-END RENDERING FUNCTIONS
        // ==========================================================

        function renderAll() {
            renderNews();
            renderHeroes();
            renderStudents();
            renderStaff();
            renderTicker();
        }

        function renderTicker() {
            document.getElementById('tickerContent').innerText = localStorage.getItem('ticker');
        }

        function renderNews() { /* ... (Unchanged) ... */
            const news = JSON.parse(localStorage.getItem('news') || '[]');
            const scroller = document.getElementById('newsScroller');
            scroller.innerHTML = '';
            const newsToScroll = [...news, ...news];
            newsToScroll.forEach(item => {
                const div = document.createElement('div');
                div.className = 'news-item';
                div.innerHTML = `<h4>Latest Update</h4><p>${item}</p>`;
                scroller.appendChild(div);
            });
            scroller.style.animationPlayState = news.length < 3 ? 'paused' : 'running';
        }

        function renderHeroes() {
            const heroes = JSON.parse(localStorage.getItem('heroes') || '[]');
            const grid = document.getElementById('heroesGrid');
            grid.innerHTML = '';
            heroes.forEach(hero => {
                const card = document.createElement('div');
                card.className = 'hero-card';
                card.innerHTML = `
                    ${getPhotoHtml(hero.photo, 'hero')}
                    <h4>${hero.name}</h4>
                    <p>${hero.class}</p>
                    <p style="font-weight: bold; color: #dc3545;">${hero.achievement}</p>
                `;
                grid.appendChild(card);
            });
        }
        
        function renderStaff() {
            const staff = JSON.parse(localStorage.getItem('staff') || '[]');
            const grid = document.getElementById('staffGrid');
            grid.innerHTML = '';
            staff.forEach(member => {
                const card = document.createElement('div');
                card.className = 'staff-card';
                card.innerHTML = `
                    ${getPhotoHtml(member.photo, 'staff')}
                    <h4>${member.name}</h4>
                    <p style="font-size: 0.9em; color: #666;">${member.designation}</p>
                `;
                grid.appendChild(card);
            });
        }
        
        function renderStudents() {
            const students = JSON.parse(localStorage.getItem('students') || '[]');
            const container = document.getElementById('studentClassesContainer');
            container.innerHTML = '';
            CLASSES.forEach(className => {
                const classStudents = students.filter(s => s.class === className);
                
                const section = document.createElement('div');
                section.className = 'class-section';
                section.innerHTML = `<h4>${className} (${classStudents.length} Students)</h4>`;
                
                const studentList = document.createElement('div');
                studentList.className = 'student-list';

                classStudents.forEach(student => {
                    const card = document.createElement('div');
                    card.className = 'student-card';
                    card.innerHTML = `
                        ${getPhotoHtml(student.photo, 'student')}
                        <p style="font-weight: bold; margin: 5px 0 0;">${student.name}</p>
                        <p style="font-size: 0.8em; margin: 0; color: #999;">ID: ${student.id}</p>
                    `;
                    studentList.appendChild(card);
                });
                
                section.appendChild(studentList);
                container.appendChild(section);
            });
        }


        // ==========================================================
        // ADMIN PANEL FUNCTIONS
        // ==========================================================
        const ADMIN_USER = 'admin';
        const ADMIN_PASS = '12345'; 

        function openAdminModal() { /* ... (Unchanged) ... */
            document.getElementById('adminModal').style.display = 'block';
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('adminDashboard').style.display = 'none';
            currentPhotoBase64 = { hero: '', student: '', staff: '' }; 
        }

        function closeAdminModal() { /* ... (Unchanged) ... */
            document.getElementById('adminModal').style.display = 'none';
        }

        function attemptLogin() { /* ... (Unchanged) ... */
            const user = document.getElementById('adminUser').value;
            const pass = document.getElementById('adminPass').value;
            const error = document.getElementById('loginError');

            if (user === ADMIN_USER && pass === ADMIN_PASS) {
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('adminDashboard').style.display = 'block';
                showAdminSection('news'); 
                error.innerText = '';
            } else {
                error.innerText = 'Invalid username or password.';
            }
        }
        
        function logout() { /* ... (Unchanged) ... */
            document.getElementById('adminDashboard').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('loginError').innerText = 'Logged out successfully.';
            renderAll();
        }

        function showAdminSection(sectionName) { /* ... (Unchanged) ... */
            document.querySelectorAll('.admin-section').forEach(section => {
                section.style.display = 'none';
            });
            document.querySelectorAll('.admin-nav button').forEach(button => {
                button.classList.remove('active');
            });
            
            document.getElementById(`admin-${sectionName}`).style.display = 'block';
            document.getElementById(`navBtn${sectionName.charAt(0).toUpperCase() + sectionName.slice(1)}`).classList.add('active');

            if (sectionName === 'news') renderAdminNewsList();
            if (sectionName === 'heroes') renderAdminHeroesList();
            if (sectionName === 'staff') renderAdminStaffList();
            if (sectionName === 'students') renderAdminStudentsList();
            if (sectionName === 'results') renderAdminResultsList();
        }
        
        // --- NEWS MANAGEMENT --- (Unchanged)
        function addNews() { /* ... */ }
        function removeNews(index) { /* ... */ }
        function renderAdminNewsList() { /* ... */ }
        function updateTickerText() { /* ... */ }

        // --- HEROES MANAGEMENT --- (Updated to clear photo state)
        function addHero() {
            const name = document.getElementById('heroNameInput').value.trim();
            const classVal = document.getElementById('heroClassInput').value;
            const achievement = document.getElementById('heroAchievementInput').value.trim();
            const photo = currentPhotoBase64.hero;

            if (name && achievement) {
                const heroes = JSON.parse(localStorage.getItem('heroes') || '[]');
                heroes.unshift({ name, class: classVal, achievement, photo });
                localStorage.setItem('heroes', JSON.stringify(heroes));
                
                document.getElementById('heroNameInput').value = '';
                document.getElementById('heroAchievementInput').value = '';
                document.getElementById('heroPhotoUpload').value = '';
                document.getElementById('heroPreview').innerHTML = '';
                currentPhotoBase64.hero = '';

                renderAdminHeroesList();
                renderHeroes();
            } else {
                alert("Please fill in Name and Achievement.");
            }
        }
        
        function removeHero(index) { /* ... (Unchanged) ... */
            const heroes = JSON.parse(localStorage.getItem('heroes') || '[]');
            heroes.splice(index, 1);
            localStorage.setItem('heroes', JSON.stringify(heroes));
            renderAdminHeroesList();
            renderHeroes();
        }

        function renderAdminHeroesList() { /* ... (Unchanged) ... */
            const heroes = JSON.parse(localStorage.getItem('heroes') || '[]');
            const listDiv = document.getElementById('heroesList');
            listDiv.innerHTML = heroes.map((hero, index) => `
                <div class="list-item">
                    <div class="photo-preview" style="width: 40px; height: 40px;">
                        ${getPhotoHtml(hero.photo, 'hero')}
                    </div>
                    <span>${hero.name} (${hero.class}) - ${hero.achievement}</span>
                    <button class="remove" onclick="removeHero(${index})">Remove</button>
                </div>
            `).join('');
      }
      // --- STAFF MANAGEMENT --- (Updated to clear photo state)
        function addStaff() {
            const name = document.getElementById('staffNameInput').value.trim();
            const designation = document.getElementById('staffDesignationInput').value;
            const photo = currentPhotoBase64.staff;

            if (name && designation) {
                const staff = JSON.parse(localStorage.getItem('staff') || '[]');
                staff.unshift({ name, designation, photo });
                localStorage.setItem('staff', JSON.stringify(staff));
                
                document.getElementById('staffNameInput').value = '';
                document.getElementById('staffPhotoUpload').value = '';
                document.getElementById('staffPreview').innerHTML = '';
                currentPhotoBase64.staff = '';

                renderAdminStaffList();
                renderStaff();
            } else {
                alert("Please fill in Name and Designation.");
            }
        }
        
        function removeStaff(index) { /* ... (Unchanged) ... */
            const staff = JSON.parse(localStorage.getItem('staff') || '[]');
            staff.splice(index, 1);
            localStorage.setItem('staff', JSON.stringify(staff));
            renderAdminStaffList();
            renderStaff();
        }

        function renderAdminStaffList() { /* ... (Unchanged) ... */
            const staff = JSON.parse(localStorage.getItem('staff') || '[]');
            const listDiv = document.getElementById('staffList');
            listDiv.innerHTML = staff.map((member, index) => `
                <div class="list-item">
                    <div class="photo-preview" style="width: 40px; height: 40px;">
                        ${getPhotoHtml(member.photo, 'staff')}
                    </div>
                    <span>${member.name} - ${member.designation}</span>
                    <button class="remove" onclick="removeStaff(${index})">Remove</button>
                </div>
            `).join('');
        }

        // --- STUDENTS MANAGEMENT --- (Updated to clear photo state and get all details)
        function addStudent() {
            const name = document.getElementById('studentNameInput').value.trim();
            const id = document.getElementById('studentIdInput').value.trim();
            const classVal = document.getElementById('studentClassInput').value;
            // NOTE: Added placeholders for father, mother, dob, rollNo for Marksheet data integrity
            const photo = currentPhotoBase64.student;

            if (name && id) {
                const students = JSON.parse(localStorage.getItem('students') || '[]');
                
                if (students.find(s => s.id === id)) {
                    alert("Error: Student ID must be unique.");
                    return;
                }

                students.push({ 
                    id, 
                    name, 
                    class: classVal, 
                    photo, 
                    father: 'N/A', 
                    mother: 'N/A', 
                    dob: 'N/A', 
                    rollNo: Math.floor(Math.random() * 900) + 100 // Placeholder roll number
                });
                localStorage.setItem('students', JSON.stringify(students));
                
                document.getElementById('studentNameInput').value = '';
                document.getElementById('studentIdInput').value = '';
                document.getElementById('studentPhotoUpload').value = '';
                document.getElementById('studentPreview').innerHTML = '';
                currentPhotoBase64.student = '';

                renderAdminStudentsList();
                renderStudents();
            } else {
                alert("Please enter a student name and ID.");
            }
        }

        function removeStudent(index) { /* ... (Unchanged) ... */
            const students = JSON.parse(localStorage.getItem('students') || '[]');
            students.splice(index, 1);
            localStorage.setItem('students', JSON.stringify(students));
            renderAdminStudentsList();
            renderStudents();
        }
        
        function renderAdminStudentsList() { /* ... (Unchanged) ... */
            const students = JSON.parse(localStorage.getItem('students') || '[]');
            const listDiv = document.getElementById('studentsList');
            listDiv.innerHTML = students.map((student, index) => `
                <div class="list-item">
                    <div class="photo-preview" style="width: 40px; height: 40px;">
                        ${getPhotoHtml(student.photo, 'student')}
                    </div>
                    <span>ID: ${student.id} | ${student.name} (${student.class})</span>
                    <button class="remove" onclick="removeStudent(${index})">Remove</button>
                </div>
            `).join('');
        }

        // --- RESULTS MANAGEMENT (UPDATED FOR SUBJECTS & MARKSHEET) ---
        function submitMarks() {
            const studentId = document.getElementById('resultStudentId').value.trim();
            const subject = document.getElementById('resultSubject').value;
            
            const students = JSON.parse(localStorage.getItem('students') || '[]');
            const studentExists = students.find(s => s.id === studentId);

            if (!studentExists) { alert("Error: Student ID not found."); return; }
            if (!subject) { alert("Please select a subject."); return; }

            const fa1 = parseInt(document.getElementById('fa1').value || 0);
            const fa2 = parseInt(document.getElementById('fa2').value || 0);
            const fa3 = parseInt(document.getElementById('fa3').value || 0);
            const fa4 = parseInt(document.getElementById('fa4').value || 0);
            const fa5 = parseInt(document.getElementById('fa5').value || 0);
            const fa6 = parseInt(document.getElementById('fa6').value || 0);
            const cca = parseInt(document.getElementById('cca').value || 0);
            const sa = parseInt(document.getElementById('sa').value || 0);

            if (fa1 > 5 || fa2 > 5 || fa3 > 5 || fa4 > 5 || fa5 > 5 || fa6 > 5 || cca > 20 || sa > 50) {
                 alert("Error: Marks exceed the maximum allowed."); return;
            }

            const totalFA = fa1 + fa2 + fa3 + fa4 + fa5 + fa6;
            const totalMarks = totalFA + cca + sa; 

            const newResult = {
                id: Date.now(),
                studentId: studentId,
                subject: subject,
                fa1, fa2, fa3, fa4, fa5, fa6, cca, sa,
                total: totalMarks,
                max: 100
            };

            let results = JSON.parse(localStorage.getItem('results') || '[]');
            // Replace existing entry for this student and subject, or push new one
            results = results.filter(r => !(r.studentId === studentId && r.subject === subject));
            results.push(newResult);

            localStorage.setItem('results', JSON.stringify(results));
            
            alert(`Marks submitted successfully for ${studentExists.name} in ${subject}! Total: ${totalMarks}/100`);
            document.getElementById('resultStudentId').value = '';
            document.getElementById('resultSubject').value = '';
            document.querySelectorAll('#admin-results input[type="number"]').forEach(input => input.value = '');
            renderAdminResultsList();
        }

        function removeResult(resultId) { /* ... (Unchanged) ... */
            let results = JSON.parse(localStorage.getItem('results') || '[]');
            results = results.filter(r => r.id !== resultId);
            localStorage.setItem('results', JSON.stringify(results));
            renderAdminResultsList();
        }

        function getGrade(totalMarks, maxMarks = 100) {
            const percentage = (totalMarks / maxMarks) * 100;
            if (percentage > 85) return 'A+';
            if (percentage > 70) return 'A';
            if (percentage > 55) return 'B';
            if (percentage > 40) return 'C';
            if (percentage > 33) return 'D';
            return 'E';
        }

        function renderAdminResultsList() {
            const results = JSON.parse(localStorage.getItem('results') || '[]');
            const students = JSON.parse(localStorage.getItem('students') || '[]');
            const listDiv = document.getElementById('resultsList');
            
            // Group results by student ID for easier display
            const studentResultsMap = new Map();
            results.forEach(r => {
                const student = students.find(s => s.id === r.studentId);
                if (!student) return;
                
                if (!studentResultsMap.has(r.studentId)) {
                    studentResultsMap.set(r.studentId, {
                        ...student,
                        subjects: []
                    });
                }
                studentResultsMap.get(r.studentId).subjects.push(r);
            });

            listDiv.innerHTML = Array.from(studentResultsMap.values()).map(studentData => {
                const totalSubjects = studentData.subjects.length;
                const totalObtained = studentData.subjects.reduce((sum, r) => sum + r.total, 0);
                const totalMax = totalSubjects * 100;
                const overallGrade = getGrade(totalObtained, totalMax);
                
                return `
                    <div class="list-item">
                        <span>ID: ${studentData.id} | ${studentData.name} (${studentData.class}) | ${totalSubjects} Subjects Graded | Overall Grade: ${overallGrade}</span>
                        <div>
                            <button class="add" onclick="generateMarksheet('${studentData.id}')" style="margin-right: 5px;">Marks Sheet</button>
                            <button class="remove" onclick="alert('Use Student management to remove student to clear all results.')">Remove All</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // --- MARKSHEET GENERATION (NEW) ---
      function generateMarksheet(studentId) {
            const students = JSON.parse(localStorage.getItem('students') || '[]');
            const results = JSON.parse(localStorage.getItem('results') || '[]');
            const student = students.find(s => s.id === studentId);
            const studentResults = results.filter(r => r.studentId === studentId);
            
            if (!student) { alert("Student data missing."); return; }
            if (studentResults.length !== SUBJECTS.length) {
                alert(`Missing marks. This student has results for only ${studentResults.length} subjects (out of ${SUBJECTS.length}).`);
                // Continue generating with available data
            }

            let totalObtainedMarks = 0;
            let totalMaxMarks = 0;
            let subjectRows = '';
            
            // Grand Total calculation
            let GT_FA1 = 0, GT_FA2 = 0, GT_FA3 = 0, GT_FA4 = 0, GT_FA5 = 0, GT_FA6 = 0;
            let GT_TOTAL_FA = 0, GT_CCA = 0, GT_SA = 0;

            SUBJECTS.forEach(subject => {
                const result = studentResults.find(r => r.subject === subject) || {};
                
                const fa1 = result.fa1 || 0; const fa2 = result.fa2 || 0; const fa3 = result.fa3 || 0;
                const fa4 = result.fa4 || 0; const fa5 = result.fa5 || 0; const fa6 = result.fa6 || 0;
                const cca = result.cca || 0; const sa = result.sa || 0;
                const total = result.total || 0;
                const max = result.max || 100;

                const totalFA = fa1 + fa2 + fa3 + fa4 + fa5 + fa6;
                const grade = getGrade(total, max);
                const proficiency = PROFICIENCY_LEVELS[grade] || 'N/A';
                
                totalObtainedMarks += total;
                totalMaxMarks += max;

                GT_FA1 += fa1; GT_FA2 += fa2; GT_FA3 += fa3; GT_FA4 += fa4; GT_FA5 += fa5; GT_FA6 += fa6;
                GT_TOTAL_FA += totalFA; GT_CCA += cca; GT_SA += sa;
                
                subjectRows += `
                    <tr>
                        <td style="text-align: left;">${subject}</td>
                        <td>${fa1}</td><td>${fa2}</td><td>${fa3}</td><td>${fa4}</td><td>${fa5}</td><td>${fa6}</td>
                        <td>${totalFA}</td>
                        <td>${cca}</td>
                        <td>${sa}</td>
                        <td>${total}</td>
                        <td>${grade}</td>
                        <td>${proficiency}</td>
                    </tr>
                `;
            });

            const grandTotal = totalObtainedMarks;
            const overallPercentage = (totalMaxMarks > 0) ? Math.round((grandTotal / totalMaxMarks) * 100) : 0;
            const overallGrade = getGrade(grandTotal, totalMaxMarks);
            const finalResult = overallPercentage >= 33 ? 'Pass' : 'Fail';
            const finalProficiency = PROFICIENCY_LEVELS[overallGrade] || 'N/A';

            const msHtml = `
                <div style="text-align: center;">
                    <h3>GOVERNMENT PRIMARY SCHOOL</h3>
                    <h4>PETHGAM WAGOORA 193109</h4>
                    <p style="text-align: right; margin: 5px 0 10px;">Sl. No. 124</p>
                </div>
                
                <table class="header-info">
                    <tr><td style="width: 25%;">Student Name:</td><td style="width: 25%; font-weight: bold;">${student.name}</td><td style="width: 25%;">Adm. No:</td><td style="width: 25%;">${student.id}</td></tr>
                    <tr><td>Fathers Name:</td><td>${student.father}</td><td>D.O.B:</td><td>${student.dob}</td></tr>
                    <tr><td>Mothers Name:</td><td>${student.mother}</td><td>Class:</td><td>${student.class}</td></tr>
                    <tr><td>Roll No:</td><td>${student.rollNo}</td><td>Academic Session:</td><td>Nov.-Dec. 2025</td></tr>
                    <tr><td>Apaar ID:</td><td>Not Available</td><td>PEN No.:</td><td>Not Available</td></tr>
                </table>

                <table border="1" style="margin-top: 25px;">
                    <thead>
                        <tr>
                            <th rowspan="2">Subject</th>
                            <th colspan="6">FA Marks (5)</th>
                            <th rowspan="2">Total (30)</th>
                            <th rowspan="2">Co-Curriculare Activities (20)</th>
                            <th rowspan="2">Summative Assessment (50)</th>
                            <th rowspan="2">Total (FA+CCA+SA) (100)</th>
                            <th rowspan="2">Grade</th>
                            <th rowspan="2">Proficiency Level</th>
                        </tr>
                        <tr>
                            <th>FA1</th><th>FA2</th><th>FA3</th><th>FA4</th><th>FA5</th><th>FA6</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${subjectRows}
                        <tr>
                            <td style="text-align: right; font-weight: bold;">Grand Total</td>
                            <td>${GT_FA1}</td><td>${GT_FA2}</td><td>${GT_FA3}</td><td>${GT_FA4}</td><td>${GT_FA5}</td><td>${GT_FA6}</td>
                            <td>${GT_TOTAL_FA}</td>
                            <td>${GT_CCA}</td>
                            <td>${GT_SA}</td>
                            <td>${grandTotal}</td>
                            <td>${overallGrade}</td>
                            <td>${finalProficiency}</td>
                        </tr>
                    </tbody>
                </table>
                
                <table class="final-summary" style="margin-top: 25px; border: none;">
                    <tr>
                        <td style="width: 30%; font-weight: bold;">Final Results</td>
                        <td style="width: 35%; font-weight: bold;">Percentage/Grade Key</td>
                        <td style="width: 35%; font-weight: bold;">Level of Proficiency</td>
                    </tr>
                    <tr>
                        <td>Total Marks Obtained: ${grandTotal}</td>
                        <td>>85% to 100%: A+</td>
                        <td>Sky: >85%</td>
                    </tr>
                    <tr>
                        <td>Max. Marks: ${totalMaxMarks}</td>
                        <td>>70% to 85%: A</td>
                        <td>Mountain: >55%</td>
                    </tr>
                    <tr>
                        <td>Overall Percentage: ${overallPercentage}%</td>
                        <td>>55% to 70%: B</td>
                        <td>Stream: >33%</td>
                    </tr>
                    <tr>
                        <td>Overall Grade: ${overallGrade}</td>
                        <td>>40% to 55%: C</td>
                        <td>Refuge: 0% to 33%</td>
                    </tr>
                    <tr>
                        <td>Result: ${finalResult}</td>
                        <td>>33% to 40%: D</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Position in Class: N/A (Dynamic sorting required)</td>
                        <td>0% to 33%: E</td>
                        <td></td>
                    </tr>
                    <tr><td colspan="3"><hr></td></tr>
                    <tr><td colspan="3">General Remarks: ${student.name} has performed well in most subjects. Needs to focus on improving overall grade.</td></tr>
                    <tr><td colspan="3">Attendance %age: N/A | Empathy & Teamwork: Good | Decipline: Excellent | Sports: Good | Art and Craft: Good</td></tr>
                </table>

                <div class="signature-row">
                    <span>Sign. Form Teacher:</span>
                    <span>Sign. Exam I/C:</span>
                    <span>Parents Signature:</span>
                    <span>Seal & Signature of Headmaster:</span>
                </div>
            `;
            
            document.getElementById('marksheetContent').innerHTML = msHtml;
            document.getElementById('marksheetModal').style.display = 'block';
        }
        
        // ==========================================================
        // INITIALIZATION AND EVENT LISTENERS
        // ==========================================================

        document.addEventListener('DOMContentLoaded', () => {
            initData(); 
            renderAll();
        });
    </script>
</body>
</html>
